<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>玉树临风美少年，揽镜自顾夜不眠 </title>
  <script type="text/javascript">
    /*
    作用域链(用来查找变量的)
      1. 用来决定代码执行的范围,变量的作用范围
      2. 作用域是代码定义的时候决定的
      3. 作用域链是如何产生的
        - 函数在定义的时候自动添加一个属性'[[Scopes]]'该属性保存的是其上级作用域链
        - 当函数执行的时候,进入执行上下文环境,将创建的变量对象添加到'[[Scopes]]'数组的第一个位置,形成新的数组
      4. 查找变量的规则
        - 先在当前作用域的变量对象中查找,找到则使用
        - 如果没有则沿着作用域链的数组去上级作用域中的变量对象中查找
        - 找到就返回对应的值,如果没有继续向上查找,知道找到最后一个变量对象(全局的变量对象),如果没有则报错
    */
  </script>
</head>

<body>
  <script type="text/javascript">

  /*
    编写代码的时候,此时作用域已经确定了,此时是一个全局作用域,如果代码执行了(js引擎开始解析js代码,代码在执行前,还没有执行呢,已经有了预解析之后,此时出现了全局执行上下文环境,此时创建一个变量对象,收集var,function,函数参数,确定this指向),此时函数已经定义完毕了,会在函数内部出现'[[Scopes]]'是一个数组,用来存储的是作用域链(当前函数外部的全局执行上下文环境中的变量对象),f1函数调用(f1函数定义的完毕,此时就有了局部作用域),出现了预解析(函数内部局部的作用中的变量的声明和函数的声明),再次出现了局部执行上下文环境(此时创建一个变量对象,收集var,function,函数参数,确定this指向),f1定义完毕后,内部再次(出现'[[Scopes]]'是一个数组,用来存储的是作用域链(当前函数外部的全局执行上下文环境中的变量对象)),f2调用...

    console.log(c) 首先在当前的作用域中查找,找到则使用(在当前的局部执行上下文环境的变量对象中查找,找到了则使用,否则去上一个执行上下文环境的变量对象中查找.....一直找到全局执行上下文环境中的变量对象,如果找到则使用,否则就报错)
  
  
  */ 

    var a = 2;
    function f1() {
      var b = 3;
      function f2() {
        var c = 4;
        console.log(c)
        console.log(b)
        console.log(a)
        console.log(d) // 报错
      }
      f2()
    }
    f1()
  </script>
</body>

</html>